{% schema %}
{
  "name": "Font Preview",
  "settings": [
    {
      "type": "select",
      "id": "default_font",
      "label": "Default Font",
      "options": [
        { "value": "Arial", "label": "Arial" },
        { "value": "Courier New", "label": "Courier New" },
        { "value": "Georgia", "label": "Georgia" },
        { "value": "Times New Roman", "label": "Times New Roman" },
        { "value": "Verdana", "label": "Verdana" }
      ],
      "default": "Arial"
    },
    {
      "type": "text",
      "id": "default_text",
      "label": "Default Text",
      "default": "The quick brown fox jumps over the lazy dog."
    }
  ],
  "presets": [
    {
      "name": "Default",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="font-preview">
  <input type="text" id="fontInput" placeholder="Type your text here..." value="{{ settings.default_text }}" />
  <input type="text" id="fontSearch" placeholder="Search fonts..." />
  <select id="fontSelect">
    <option value="Arial">Arial</option>
    <option value="Courier New">Courier New</option>
    <option value="Georgia">Georgia</option>
    <option value="Times New Roman">Times New Roman</option>
    <option value="Verdana">Verdana</option>
  </select>
  <div class="font-preview-box">
    <p id="previewText" style="font-family: {{ settings.default_font }};">
      {{ settings.default_text }}
    </p>
  </div>

</div>
 
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var fontInput = document.getElementById('fontInput');
    var fontSelect = document.getElementById('fontSelect');
    var previewText = document.getElementById('previewText');

    // Load the default font
    loadFont(fontSelect.value);

    // Update preview text on input
    fontInput.addEventListener('input', function() {
      previewText.textContent = fontInput.value || '{{ settings.default_text }}';
    });

    // Update font on dropdown change
    fontSelect.addEventListener('change', function() {
      loadFont(fontSelect.value);
      previewText.style.fontFamily = fontSelect.value;
    });

    function loadFont(fontName) {
      var link = document.createElement('link');
      link.href = 'https://fonts.googleapis.com/css2?family=' + encodeURIComponent(fontName) + '&display=swap';
      link.rel = 'stylesheet';
      document.head.appendChild(link);
    }

    // Implement font search/filter
    var searchInput = document.getElementById('fontSearch');

    searchInput.addEventListener('input', function() {
      var filter = searchInput.value.toLowerCase();
      var options = fontSelect.getElementsByTagName('option');
      for (var i = 0; i < options.length; i++) {
        var option = options[i];
        var text = option.textContent || option.innerText;
        option.style.display = text.toLowerCase().indexOf(filter) > -1 ? '' : 'none';
      }
    });
  });
</script>

<style>
  .font-preview {
    width: 80vw;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    background-color: #f9f9f9;
  }

  .font-preview input[type="text"],
  .font-preview select {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    transition: border-color 0.2s ease-in-out;
  }

  .font-preview input[type="text"]:focus,
  .font-preview select:focus {
    border-color: #0073e6;
    outline: none;
  }

  .font-preview-box {
    margin-top: 12px;
    background-color: #fff;
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    min-height: 100px;
  }

  #fontSearch {
    margin-bottom: 10px;
  }

  #previewText {
    font-size: 20px;
    line-height: 1.6;
  }
</style>
