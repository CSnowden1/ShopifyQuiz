{% schema %}
{
  "name": "Font Preview",
  "settings": [
    {
      "type": "select",
      "id": "default_font",
      "label": "Default Font",
      "options": [
        { "value": "Arial", "label": "Arial" },
        { "value": "Courier New", "label": "Courier New" },
        { "value": "Georgia", "label": "Georgia" },
        { "value": "Times New Roman", "label": "Times New Roman" },
        { "value": "Verdana", "label": "Verdana" },
        { "value": "Roboto", "label": "Roboto" },
        { "value": "Open Sans", "label": "Open Sans" },
        { "value": "Lato", "label": "Lato" },
        { "value": "Montserrat", "label": "Montserrat" },
        { "value": "Poppins", "label": "Poppins" },
        { "value": "Raleway", "label": "Raleway" },
        { "value": "Nunito", "label": "Nunito" },
        { "value": "Oswald", "label": "Oswald" },
        { "value": "PT Sans", "label": "PT Sans" },
        { "value": "Merriweather", "label": "Merriweather" },
        { "value": "Playfair Display", "label": "Playfair Display" },
        { "value": "Droid Sans", "label": "Droid Sans" },
        { "value": "Cabin", "label": "Cabin" },
        { "value": "Source Sans Pro", "label": "Source Sans Pro" },
        { "value": "Ubuntu", "label": "Ubuntu" },
        { "value": "Quicksand", "label": "Quicksand" },
        { "value": "Fira Sans", "label": "Fira Sans" }
      ],
      "default": "Arial"
    },
    {
      "type": "text",
      "id": "additional_font_1",
      "label": "Additional Font 1",
      "default": "Roboto"
    },
    {
      "type": "text",
      "id": "additional_font_2",
      "label": "Additional Font 2",
      "default": "Open Sans"
    },
    {
      "type": "text",
      "id": "additional_font_3",
      "label": "Additional Font 3",
      "default": "Lato"
    },
    {
      "type": "text",
      "id": "additional_font_4",
      "label": "Additional Font 4",
      "default": "Montserrat"
    },
    {
      "type": "text",
      "id": "additional_font_5",
      "label": "Additional Font 5",
      "default": "Poppins"
    },
    {
      "type": "text",
      "id": "default_text",
      "label": "Default Text",
      "default": "The quick brown fox jumps over the lazy dog."
    }
  ],
  "presets": [
    {
      "name": "Default",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="font-preview">
  <input type="text" id="fontInput" placeholder="Type your text here..." value="{{ settings.default_text }}" />
  <input type="text" id="fontSearch" placeholder="Search fonts..." />

  <select id="fontSelect">
    {% assign fonts = "Arial, Courier New, Georgia, Times New Roman, Verdana, Roboto, Open Sans, Lato, Montserrat, Poppins, Raleway, Nunito, Oswald, PT Sans, Merriweather, Playfair Display, Droid Sans, Cabin, Source Sans Pro, Ubuntu, Quicksand, Fira Sans" | split: ", " %}
    {% for font in fonts %}
      <option value="{{ font }}" {% if font == settings.default_font %}selected{% endif %}>{{ font }}</option>
    {% endfor %}
  </select>
  <div class="font-preview-box">
    <p id="previewText" style="font-family: {{ settings.default_font }};">
      {{ settings.default_text }}
    </p>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var fontInput = document.getElementById('fontInput');
    var fontSelect = document.getElementById('fontSelect');
    var previewText = document.getElementById('previewText');

    // Load the default font
    loadFont(fontSelect.value);

    // Update preview text on input
    fontInput.addEventListener('input', function() {
      previewText.textContent = fontInput.value || '{{ settings.default_text }}';
    });

    // Update font on dropdown change
    fontSelect.addEventListener('change', function() {
      loadFont(fontSelect.value);
      previewText.style.fontFamily = fontSelect.value;
    });

    function loadFont(fontName) {
      var link = document.createElement('link');
      link.href = 'https://fonts.googleapis.com/css2?family=' + encodeURIComponent(fontName) + '&display=swap';
      link.rel = 'stylesheet';
      document.head.appendChild(link);
    }
  });
</script>

<style>
  .font-preview {
    width: 80vw;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    background-color: #f9f9f9;
  }

  .font-preview input[type="text"],
  .font-preview select {
    width: 100%;
    padding: 12px;
    margin-bottom: 12px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    transition: border-color 0.2s ease-in-out;
  }

  .font-preview input[type="text"]:focus,
  .font-preview select:focus {
    border-color: #0073e6;
    outline: none;
  }

  .font-preview-box {
    margin-top: 12px;
    background-color: #fff;
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    min-height: 100px;
  }

  #fontSearch {
    margin-bottom: 10px;
  }

  #previewText {
    font-size: 20px;
    line-height: 1.6;
  }
</style>
