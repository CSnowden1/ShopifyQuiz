{% schema %}
{
  "name": "Font Preview",
  "settings": [
    {
      "type": "select",
      "id": "default_font",
      "label": "Default Font",
      "options": [
        { "value": "Arial", "label": "Arial" },
        { "value": "Courier New", "label": "Courier New" },
        { "value": "Georgia", "label": "Georgia" },
        { "value": "Times New Roman", "label": "Times New Roman" },
        { "value": "Verdana", "label": "Verdana" }
      ],
      "default": "Arial"
    },
    {
      "type": "text",
      "id": "default_text",
      "label": "Default Text",
      "default": "The quick brown fox jumps over the lazy dog."
    }
  ],
  "presets": [
    {
      "name": "Default",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="font-preview">
  <input type="text" id="fontInput" placeholder="Type your text here..." value="{{ settings.default_text }}" />
  <select id="fontSelect">
    <option value="Arial">Arial</option>
    <option value="Courier New">Courier New</option>
    <option value="Georgia">Georgia</option>
    <option value="Times New Roman">Times New Roman</option>
    <option value="Verdana">Verdana</option>
  </select>
  <p id="previewText" style="font-family: {{ settings.default_font }};">
    {{ settings.default_text }}
  </p>
</div>


<script>

    document.addEventListener('DOMContentLoaded', function() {
        var fontInput = document.getElementById('fontInput');
        var fontSelect = document.getElementById('fontSelect');
        var previewText = document.getElementById('previewText');
      
        // Load the default font
        loadFont(fontSelect.value);
      
        // Update preview text on input
        fontInput.addEventListener('input', function() {
          previewText.textContent = fontInput.value || '{{ settings.default_text }}';
        });
      
        // Update font on dropdown change
        fontSelect.addEventListener('change', function() {
          loadFont(fontSelect.value);
          previewText.style.fontFamily = fontSelect.value;
        });
      
        function loadFont(fontName) {
          var link = document.createElement('link');
          link.href = 'https://fonts.googleapis.com/css2?family=' + encodeURIComponent(fontName) + '&display=swap';
          link.rel = 'stylesheet';
          document.head.appendChild(link);
        }
      
        // Implement font search/filter (optional, for large font lists)
        var searchInput = document.createElement('input');
        searchInput.setAttribute('placeholder', 'Search fonts...');
        searchInput.setAttribute('id', 'fontSearch');
        document.querySelector('.font-preview').insertBefore(searchInput, fontSelect);
      
        searchInput.addEventListener('input', function() {
          var filter = searchInput.value.toLowerCase();
          var options = fontSelect.getElementsByTagName('option');
          for (var i = 0; i < options.length; i++) {
            var option = options[i];
            var text = option.textContent || option.innerText;
            option.style.display = text.toLowerCase().indexOf(filter) > -1 ? '' : 'none';
          }
        });
      });
      

</script>



<style>

    .font-preview input[type="text"] {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        font-size: 16px;
      }
      
      .font-preview select {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        font-size: 16px;
      }
      
      .font-preview p {
        font-size: 18px;
        line-height: 1.5;
        margin-top: 10px;
      }
      
      #fontSearch {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        font-size: 16px;
      }
      

</style>